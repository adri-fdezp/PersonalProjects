@use 'variables' as *;
@use 'mixins' as *;
@use 'components';

/* =========================================
   OSINT DASHBOARD & TOOLS
   ========================================= */

// Main Container for Tool Views
.tool-view-container {
  height: 100%;
  display: flex;
  flex-direction: column;
  position: relative;
  animation: fadeIn 0.5s ease-out;
  overflow-y: auto; // Ensure scrolling if needed
  padding-right: 0.5rem; // Space for scrollbar
}

// Headers
.tool-header {
  margin-bottom: 1.5rem;

  h2 {
    font-size: 1.5rem; // 2xl
    font-weight: 700;
    color: $white;
    letter-spacing: 0.025em; // wide
    margin-bottom: 0.25rem;
  }
  
  p {
    @extend .text-muted;
  }
}

// Tabs
.tool-tabs {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  margin-bottom: 1.5rem;
  padding-bottom: 1rem;
  border-bottom: 1px solid $slate-800;
}

.tab-item {
  padding: 0.25rem 0.75rem;
  border-radius: 0.25rem;
  font-size: 0.875rem; // sm
  transition: all 150ms;
  border: 1px solid transparent;
  background: none;
  cursor: pointer;
  color: $slate-400;

  &:hover {
    color: $white;
    background-color: $slate-800;
  }

  &.active {
    background-color: rgba($cyan-900, 0.3);
    border-color: $cyan-500;
    color: $cyan-400;
    font-weight: 700;
  }
}

// Grids
.tool-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 1rem;
  padding-bottom: 1rem;

  @include md { grid-template-columns: repeat(2, 1fr); }
  @include lg { grid-template-columns: repeat(3, 1fr); }
  @include xl { grid-template-columns: repeat(4, 1fr); }
}

.tool-item {
  @extend .card-tool; // Inherit basic tool card styles
  height: 6rem; // reduced from 8rem
  display: flex;
  flex-direction: row; // Changed to row for better compact layout
  align-items: center;
  justify-content: flex-start;
  text-decoration: none;
  padding: 1rem; // Adjusted padding

  .tool-item-header {
    display: flex;
    align-items: center;
    width: 100%;
    margin-bottom: 0; // Removed margin
  }

  .tool-item-title-group {
    display: flex;
    align-items: center;
    gap: 1rem; // Increased gap

    img {
      width: 2.5rem; // Increased from 1.25rem
      height: 2.5rem;
      object-fit: contain;
      opacity: 0.9; // Increased opacity
      transition: opacity 150ms;
    }

    h3 {
      font-weight: 700;
      font-size: 1rem; // Increased font size slightly
      color: $white;
      transition: color 150ms;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
  }

  &:hover {
    .tool-item-title-group img { opacity: 1; transform: scale(1.1); transition: transform 0.2s; }
    .tool-item-title-group h3 { color: $cyan-400; }
    // Arrow icon removal for cleaner compact look, or keep if preferred
    svg.arrow-icon { color: $cyan-500; } 
  }

  .arrow-icon {
    width: 1rem;
    height: 1rem;
    color: $slate-600;
    margin-left: auto; // Push to right
  }

  // Hide description for compact view as requested "cards smaller" implies less content
  p {
    display: none; 
  }
}

/* =========================================
   THREAT INTEL / CHARTS
   ========================================= */

.chart-layout {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
  margin-top: 2rem;
  width: 100%;
}

.section-header {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  align-items: flex-end;
  border-bottom: 1px solid $slate-700;
  padding-bottom: 0.5rem;
  margin-bottom: 1rem;

  @include md {
    flex-direction: row;
  }

  .title-group {
    h3 {
      @extend .heading-card;
      font-size: 1.5rem;
      color: $cyan-400;
      margin-bottom: 0.25rem;
    }
    p {
      @extend .text-muted;
    }
  }

  .source-link {
    text-align: right;
    
    .label {
      font-size: 0.75rem; // xs
      color: $slate-500;
      font-family: $font-mono;
      margin-bottom: 0.25rem;
    }

    a {
      color: $cyan-500;
      font-size: 0.875rem;
      font-weight: 700;
      display: flex;
      align-items: center;
      justify-content: flex-end;
      gap: 0.5rem;
      
      &:hover { color: $cyan-300; }
      
      svg { width: 1rem; height: 1rem; }
    }
  }
}

.metrics-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 1.5rem;

  @include md { grid-template-columns: repeat(4, 1fr); }
}

.stat-card {
  @extend .cyber-card;
  padding: 1.5rem;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  background-image: linear-gradient(to bottom right, $slate-900, $slate-800);
  border-left: 4px solid $red-400;

  h4 {
    color: $slate-400;
    font-size: 0.875rem;
    font-family: $font-mono;
    text-transform: uppercase;
    margin-bottom: 0.5rem;
  }

  .value {
    font-size: 3rem; // 5xl
    font-weight: 700;
    color: $white;
  }

  .sub {
    font-size: 0.75rem;
    color: $red-400;
    font-family: $font-mono;
    margin-top: 0.5rem;
  }
}

.chart-card {
  @extend .cyber-card;
  padding: 1rem;
  min-height: 250px;
  display: flex;
  flex-direction: column;

  &.col-span-3 {
    @include md { grid-column: span 3 / span 3; }
  }
  
  &.col-span-2 {
     @include md { grid-column: span 2 / span 2; }
  }

  h4 {
    font-size: 0.875rem;
    font-weight: 700;
    color: $white;
    margin-bottom: 1rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    border-bottom: 1px solid $slate-700;
    padding-bottom: 0.25rem;

    .dot {
      width: 0.5rem;
      height: 0.5rem;
      border-radius: 50%;
      background-color: $cyan-500;
    }
  }

  .chart-area {
    flex: 1;
    width: 100%;
    min-height: 0;
  }
}

/* =========================================
   GENERAL INFO
   ========================================= */
.general-info-layout {
  height: 100%;
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
  overflow-y: auto;
  padding-right: 0.5rem;
}

.info-banner {
  background-color: rgba($slate-900, 0.8);
  border: 1px solid rgba($cyan-500, 0.3);
  padding: 2rem;
  position: relative;
  overflow: hidden;
  
  .bg-icon {
    position: absolute;
    top: 0;
    right: 0;
    padding: 1rem;
    opacity: 0.2;
    transition: opacity 150ms;
    
    svg { width: 8rem; height: 8rem; color: $cyan-500; }
  }

  &:hover .bg-icon { opacity: 0.4; }

  h2 {
    font-size: 1.875rem; // 3xl
    font-weight: 700;
    color: $white;
    margin-bottom: 0.5rem;
    letter-spacing: -0.025em;
  }

  .meta {
    color: $cyan-400;
    font-family: $font-mono;
    font-size: 0.875rem;
    margin-bottom: 1.5rem;
  }

  .desc {
    max-width: 42rem;
    font-size: 1.125rem; // lg
    color: $slate-300;
    line-height: 1.625;

    span {
      color: $cyan-300;
      font-weight: 600;
    }
  }
}

.info-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 1.5rem;

  @include md { grid-template-columns: repeat(2, 1fr); }
}

.info-card {
  background-color: rgba($slate-900, 0.5);
  border: 1px solid $slate-700;
  padding: 1.5rem;

  h3 {
    font-size: 1.25rem;
    font-weight: 700;
    color: $white;
    margin-bottom: 1rem;
    border-bottom: 1px solid $slate-700;
    padding-bottom: 0.5rem;
    display: flex;
    align-items: center;

    span { margin-right: 0.5rem; }
  }
}

.mission-list {
  li {
    display: flex;
    align-items: flex-start;
    margin-bottom: 0.75rem;

    .bullet {
      color: $cyan-500;
      margin-right: 0.5rem;
      margin-top: 0.25rem;
    }
  }
}

.status-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 1rem;

  .status-box {
    background-color: $slate-950;
    padding: 0.75rem;
    border-left: 2px solid;
    
    &.green { border-color: $green-400; }
    &.cyan { border-color: $cyan-400; }
    &.yellow { border-color: #eab308; } // yellow-500
    &.purple { border-color: $purple-500; }

    .label {
      font-size: 0.75rem;
      color: $slate-500;
      text-transform: uppercase;
    }

    .val {
      font-size: 1.125rem;
      font-weight: 700;
      
      &.green { color: $green-400; }
      &.white { color: $white; }
      &.yellow { color: #facc15; } // yellow-400
    }
  }
}

.nav-shortcuts {
  @extend .info-card;
  margin-top: auto;

  .shortcuts-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1rem;
    
    @include md { grid-template-columns: repeat(4, 1fr); }
  }

  .shortcut-btn {
    padding: 0.75rem;
    background-color: $slate-800;
    border: 1px solid $slate-700;
    text-align: left;
    transition: all 150ms;
    cursor: pointer;

    &:hover {
      background-color: rgba($cyan-900, 0.3);
      border-color: rgba($cyan-500, 0.5);

      .sub { color: $cyan-300; }
    }

    .sub {
      display: block;
      font-size: 0.75rem; // xs
      color: $cyan-500;
      margin-bottom: 0.25rem;
    }
    
    .title {
      font-weight: 700;
      color: $white;
    }
  }
}
